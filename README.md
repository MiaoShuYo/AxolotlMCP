# AxolotlMCP

ä¸€ä¸ªåŸºäº.NET 8å’Œ.NET 9çš„Model Context Protocol (MCP) å®ç°ï¼Œç±»ä¼¼äºFastMCPä½†ä¸“ä¸º.NETç”Ÿæ€ç³»ç»Ÿè®¾è®¡ã€‚

## é¡¹ç›®ç»“æ„æ¦‚è§ˆ

### å®Œæ•´ç›®å½•ç»“æ„å›¾

```
AxolotlMCP/
â”œâ”€â”€ ğŸ“ src/                                    # æºä»£ç æ ¹ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ AxolotlMCP.Core/                   # æ ¸å¿ƒåè®®ä¸æŠ½è±¡å±‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ AxolotlMCP.Core.csproj         # Core é¡¹ç›®æ–‡ä»¶ (net8.0/net9.0)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ GlobalUsing.cs                 # å…¨å±€ using æ±‡æ€»
â”‚   â”‚   â”œâ”€â”€ ğŸ“ Protocol/                      # MCP åè®®æ•°æ®ç»“æ„
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ Message/                   # åè®®æ¶ˆæ¯æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ McpMessage.cs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ McpError.cs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ RequestMessage.cs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ResponseMessage.cs
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ NotificationMessage.cs
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ JsonSchema.cs
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ McpTool.cs
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ McpResource.cs
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ McpPrompt.cs
â”‚   â”‚   â””â”€â”€ ğŸ“ Interfaces/                    # æ ¸å¿ƒæ¥å£å®šä¹‰
â”‚   â”‚       â””â”€â”€ ğŸ“„ IMcpHandler.cs             # å¤„ç†å™¨/æœåŠ¡å™¨/å®¢æˆ·ç«¯æ¥å£
â”‚   â”œâ”€â”€ ğŸ“ AxolotlMCP.Server/                 # æœåŠ¡å™¨å®ç°å±‚
â”‚   â”‚   â””â”€â”€ ğŸ“„ AxolotlMCP.Server.csproj       # Server é¡¹ç›®æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“ AxolotlMCP.Client/                 # å®¢æˆ·ç«¯å®ç°å±‚
â”‚       â””â”€â”€ ğŸ“„ AxolotlMCP.Client.csproj       # Client é¡¹ç›®æ–‡ä»¶
â”œâ”€â”€ ğŸ“ examples/                              # ç¤ºä¾‹ä»£ç æ ¹ç›®å½•
â”‚   â””â”€â”€ ğŸ“ AxolotlMCP.Examples/               # ç¤ºä¾‹å¯æ‰§è¡Œé¡¹ç›®
â”‚       â”œâ”€â”€ ğŸ“„ AxolotlMCP.Examples.csproj     # ç¤ºä¾‹é¡¹ç›®æ–‡ä»¶
â”‚       â””â”€â”€ ğŸ“ SimpleServer/                  # ç®€å•æœåŠ¡å™¨ç¤ºä¾‹
â”‚           â””â”€â”€ ğŸ“„ SimpleServer.cs            # ç¤ºä¾‹ä»£ç å®ç°
â”œâ”€â”€ ğŸ“ tests/                                 # æµ‹è¯•ä¸åŸºå‡†æ ¹ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ AxolotlMCP.Tests/                  # å•å…ƒæµ‹è¯•é¡¹ç›®
â”‚   â”‚   â””â”€â”€ ğŸ“„ AxolotlMCP.Tests.csproj        # æµ‹è¯•é¡¹ç›®æ–‡ä»¶ (xUnit)
â”‚   â””â”€â”€ ğŸ“ AxolotlMCP.Benchmarks/             # åŸºå‡†æµ‹è¯•é¡¹ç›®
â”‚       â””â”€â”€ ğŸ“„ AxolotlMCP.Benchmarks.csproj   # åŸºå‡†é¡¹ç›®æ–‡ä»¶ (BenchmarkDotNet)
â”œâ”€â”€ ğŸ“ docs/                                  # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ ğŸ“„ ARCHITECTURE.md                    # æ¶æ„è®¾è®¡è¯´æ˜
â”œâ”€â”€ ğŸ“ samples/                               # é…ç½®ä¸ç¤ºä¾‹æ•°æ®
â”‚   â””â”€â”€ ğŸ“„ simple-server.json                 # ç®€å•æœåŠ¡å™¨é…ç½®ç¤ºä¾‹
â”œâ”€â”€ ğŸ“ tools/                                 # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ ğŸ“„ build.ps1                          # æ„å»º/æµ‹è¯•/æ‰“åŒ…è„šæœ¬
â”œâ”€â”€ ğŸ“„ AxolotlMCP.sln                         # è§£å†³æ–¹æ¡ˆæ–‡ä»¶
â”œâ”€â”€ ğŸ“„ Directory.Build.props                  # ç»Ÿä¸€æ„å»ºå±æ€§
â”œâ”€â”€ ğŸ“„ .gitignore                             # Git å¿½ç•¥è§„åˆ™
â””â”€â”€ ğŸ“„ README.md                              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

### é¡¹ç›®ä¾èµ–å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AxolotlMCP.sln                          â”‚
â”‚                    è§£å†³æ–¹æ¡ˆæ–‡ä»¶                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚               â”‚               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ AxolotlMCP.Core â”‚ â”‚ AxolotlMCP â”‚ â”‚ AxolotlMCP   â”‚
        â”‚    (æ ¸å¿ƒå±‚)     â”‚ â”‚  Server    â”‚ â”‚   Client     â”‚
        â”‚                â”‚ â”‚  (æœåŠ¡å™¨)   â”‚ â”‚  (å®¢æˆ·ç«¯)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚               â”‚               â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚      AxolotlMCP.Examples      â”‚
                â”‚         (ç¤ºä¾‹é¡¹ç›®)             â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚        AxolotlMCP.Tests       â”‚
                â”‚         (å•å…ƒæµ‹è¯•)             â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚     AxolotlMCP.Benchmarks     â”‚
                â”‚         (æ€§èƒ½æµ‹è¯•)             â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—èŒè´£è¾¹ç•Œ

#### ğŸ—ï¸ æ ¸å¿ƒå±‚ (AxolotlMCP.Core)
- **èŒè´£**: MCPåè®®åŸºç¡€å®ç°ã€æ•°æ®ç»“æ„å®šä¹‰ã€æ¥å£æŠ½è±¡
- **åŒ…å«**: æ¶ˆæ¯ç±»å‹ã€æ•°æ®ç±»å‹ã€æ ¸å¿ƒæ¥å£
- **ä¾èµ–**: æ— å†…éƒ¨ä¾èµ–ï¼Œä»…ä¾èµ–.NETåŸºç¡€åº“

#### ğŸ–¥ï¸ æœåŠ¡å™¨å±‚ (AxolotlMCP.Server)
- **èŒè´£**: MCPæœåŠ¡å™¨å®ç°ã€æ¶ˆæ¯è·¯ç”±ã€å·¥å…·ç®¡ç†
- **åŒ…å«**: æœåŠ¡å™¨å®ç°ã€ä¸­é—´ä»¶æ”¯æŒã€å·¥å…·æ³¨å†Œ
- **ä¾èµ–**: ä¾èµ–Coreå±‚

#### ğŸ’» å®¢æˆ·ç«¯å±‚ (AxolotlMCP.Client)
- **èŒè´£**: MCPå®¢æˆ·ç«¯å®ç°ã€è¿æ¥ç®¡ç†ã€è¯·æ±‚å¤„ç†
- **åŒ…å«**: å®¢æˆ·ç«¯å®ç°ã€è¿æ¥æ± ã€è¯·æ±‚/å“åº”å¤„ç†
- **ä¾èµ–**: ä¾èµ–Coreå±‚

#### ğŸ“š ç¤ºä¾‹å±‚ (AxolotlMCP.Examples)
- **èŒè´£**: å±•ç¤ºæ¡†æ¶ä½¿ç”¨æ–¹æ³•ã€æœ€ä½³å®è·µ
- **åŒ…å«**: ç®€å•æœåŠ¡å™¨ç¤ºä¾‹ã€ä½¿ç”¨åœºæ™¯æ¼”ç¤º
- **ä¾èµ–**: ä¾èµ–æ‰€æœ‰æ ¸å¿ƒå±‚

#### ğŸ§ª æµ‹è¯•å±‚ (AxolotlMCP.Tests + Benchmarks)
- **èŒè´£**: è´¨é‡ä¿è¯ã€æ€§èƒ½éªŒè¯
- **åŒ…å«**: å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ€§èƒ½åŸºå‡†
- **ä¾èµ–**: ä¾èµ–æ‰€æœ‰æ ¸å¿ƒå±‚

### æŠ€æœ¯æ ˆè¯´æ˜

| ç»„ä»¶ | æŠ€æœ¯æ ˆ | è¯´æ˜ |
|------|--------|------|
| **ç›®æ ‡æ¡†æ¶** | .NET 8.0 / .NET 9.0 | å¤šç›®æ ‡æ¡†æ¶æ”¯æŒ |
| **åºåˆ—åŒ–** | System.Text.Json | é«˜æ€§èƒ½JSONåºåˆ—åŒ– |
| **ä¾èµ–æ³¨å…¥** | Microsoft.Extensions.DI | å†…ç½®DIå®¹å™¨ |
| **æ—¥å¿—è®°å½•** | Microsoft.Extensions.Logging | ç»“æ„åŒ–æ—¥å¿— |
| **æµ‹è¯•æ¡†æ¶** | xUnit + FluentAssertions | å•å…ƒæµ‹è¯• |
| **æ€§èƒ½æµ‹è¯•** | BenchmarkDotNet | æ€§èƒ½åŸºå‡†æµ‹è¯• |
| **æ„å»ºå·¥å…·** | .NET CLI + PowerShell | è·¨å¹³å°æ„å»º |

### å¼€å‘å·¥ä½œæµ

```mermaid
graph TD
    A[å¼€å‘åŠŸèƒ½] --> B[ç¼–å†™æµ‹è¯•]
    B --> C[è¿è¡Œæµ‹è¯•]
    C --> D{æµ‹è¯•é€šè¿‡?}
    D -->|å¦| E[ä¿®å¤é—®é¢˜]
    E --> B
    D -->|æ˜¯| F[æ€§èƒ½æµ‹è¯•]
    F --> G[ä»£ç å®¡æŸ¥]
    G --> H[åˆå¹¶åˆ°ä¸»åˆ†æ”¯]
    H --> I[å‘å¸ƒNuGetåŒ…]
```

### æ–‡ä»¶å‘½åè§„èŒƒ

- **é¡¹ç›®æ–‡ä»¶**: `AxolotlMCP.{æ¨¡å—å}.csproj`
- **æºä»£ç æ–‡ä»¶**: `PascalCase.cs`
- **æ¥å£æ–‡ä»¶**: `I{æ¥å£å}.cs`
- **æµ‹è¯•æ–‡ä»¶**: `{ç±»å}Tests.cs`
- **é…ç½®æ–‡ä»¶**: `kebab-case.json`
- **è„šæœ¬æ–‡ä»¶**: `kebab-case.ps1`

## ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**: åŸºäº.NET 8/9çš„æœ€æ–°ç‰¹æ€§
- ğŸ”§ **æ˜“äºä½¿ç”¨**: ç®€å•çš„APIè®¾è®¡
- ğŸ› ï¸ **å¯æ‰©å±•**: æ”¯æŒè‡ªå®šä¹‰å¤„ç†å™¨å’Œä¸­é—´ä»¶
- ğŸ“¦ **NuGetåŒ…**: æ”¯æŒåŒ…ç®¡ç†å™¨å®‰è£…
- ğŸ§ª **å®Œæ•´æµ‹è¯•**: åŒ…å«å•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•
- ğŸ“š **ä¸°å¯Œæ–‡æ¡£**: è¯¦ç»†çš„APIæ–‡æ¡£å’Œç¤ºä¾‹

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
dotnet add package AxolotlMCP.Core
dotnet add package AxolotlMCP.Server
dotnet add package AxolotlMCP.Client
```

### åˆ›å»ºç®€å•æœåŠ¡å™¨

```csharp
using AxolotlMCP.Core.Interfaces;
using AxolotlMCP.Core.Protocol;

public class MyMcpHandler : IMcpHandler
{
    public async Task<ResponseMessage> HandleRequestAsync(RequestMessage request, CancellationToken cancellationToken = default)
    {
        // å¤„ç†MCPè¯·æ±‚
        return new ResponseMessage { /* ... */ };
    }

    public Task HandleNotificationAsync(NotificationMessage notification, CancellationToken cancellationToken = default)
    {
        // å¤„ç†MCPé€šçŸ¥
        return Task.CompletedTask;
    }

    public string[] GetSupportedMethods()
    {
        return new[] { "initialize", "tools/list" };
    }
}
```

## å¼€å‘

### æ„å»ºé¡¹ç›®

```bash
dotnet build
```

### è¿è¡Œæµ‹è¯•

```bash
dotnet test
```

### è¿è¡Œç¤ºä¾‹

```bash
dotnet run --project examples/AxolotlMCP.Examples
```

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼
