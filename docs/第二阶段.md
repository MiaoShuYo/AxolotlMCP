# 第二阶段功能完成清单（中优先级，阶段二）

本阶段聚焦可扩展传输、可观测性强化、中间件机制与配置化扩展。

## 已完成功能（5/5）

- 资源与提示（Resources/Prompts）
  - 注册与列举：`ResourceRegistry`、`PromptRegistry`
  - 订阅事件基础：`resources/subscribe`、`prompts/subscribe`（变更时通知 `resources/changed`、`prompts/changed`）
  - 文档：`docs/资源与提示.md`

- WebSocket 传输
  - `WebSocketTransport`（文本帧、UTF-8、分片聚合、优雅关闭）
  - 文档：`docs/WebSocket传输.md`

- 可观测性扩展（Tracing/导出）
  - `McpTracing`（ActivitySource: AxolotlMCP）
  - 服务器请求 span：`mcp.request`（标签：`mcp.method`、`mcp.request.id`）
  - 工具相关 span：`mcp.tools.list`、`mcp.tools.call`（标签：`tool.name`、`tool.found`、`tool.success`、异常信息）
  - 文档：`docs/Tracing与导出.md`

- 中间件机制
  - 管道与接口：`RequestMiddlewarePipeline`、`IRequestMiddleware`
  - 接入服务器：请求经由管道再到处理器
  - 内置示例：`TimingMiddleware`（耗时）、`RateLimitMiddleware`（并发限流）
  - 文档：`docs/中间件.md`

- 配置化扩展
  - `RateLimitOptions`（`Mcp:RateLimit` → `PermitLimit`/`QueueLimit`）驱动示例限流中间件
  - 样例配置：`samples/appsettings.sample.json`
  - 文档：`docs/配置系统.md`

## 关联 Issue（阶段二父项）
- 父项：#12 中优先级功能（阶段二）
- 子项：#13、#14、#15、#16、#17（均已关闭）

## 建议后续
- 资源/提示订阅的完整语义与端到端示例
- 鉴权/审计中间件样例与配置化开关
- Tracing/Metrics 导出流水线（OTLP/Prom）与 README 快速接入片段
