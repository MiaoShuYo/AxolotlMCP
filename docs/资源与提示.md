# 资源与提示（Resources / Prompts）

## 目标
- 提供资源与提示的注册、查询与列举能力，后续支持订阅与变更通知。

## 关键类型
- `ResourceRegistry`：注册/批量注册/查询 `McpResource`。
- `PromptRegistry`：注册/批量注册/查询 `McpPrompt`。

## 使用示例

```csharp
var resources = new ResourceRegistry();
resources.Register(new McpResource { Name = "doc:readme", Description = "项目 README 文件" });
var list = resources.GetAll();

var prompts = new PromptRegistry();
prompts.Register(new McpPrompt { Name = "summarize", Description = "摘要", Template = "请总结: {{text}}" });
```

## 默认处理器 API（基础）

- 列表：
  - `resources/list` → `{ resources: McpResource[] }`
  - `prompts/list` → `{ prompts: McpPrompt[] }`
- 订阅（占位实现）：
  - `resources/subscribe` → `{ ok: true }`
  - `prompts/subscribe` → `{ ok: true }`

### 事件格式
- 资源变更通知：
  - 方法：`resources/changed`
  - Params：`{ action: "added" | "removed" | "updated", name: string }`
- 提示变更通知：
  - 方法：`prompts/changed`
  - Params：`{ action: "added" | "removed" | "updated", name: string }`

### 订阅示例代码（客户端伪代码）
```csharp
var client = /* 见 McpClient 使用 */;
await client.ConnectAsync();

client.OnNotification += async (note, ct) =>
{
    if (note.Method == "resources/changed" || note.Method == "prompts/changed")
    {
        // 处理变更事件
        Console.WriteLine(note.Params?.ToString());
    }
};

// 订阅
await client.SendRequestAsync(new RequestMessage { Method = "resources/subscribe" });
await client.SendRequestAsync(new RequestMessage { Method = "prompts/subscribe" });
```

## 下一步
- API 接口化（list/subscribe）与默认处理器集成。
- 示例与测试用例补充。


