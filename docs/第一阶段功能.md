# 第一阶段功能完成清单（截至 2025-09-23）

本阶段目标：完成最小可用的 MCP Server/Client 与基础配套（传输、工具、生命周期、配置、可观测性、示例与单元测试）。

## 已完成功能

- 核心协议与模型
  - JSON 序列化统一（小驼峰、忽略空值、允许注释与尾逗号、数字从字符串读取、中文不转义）
  - Lifecycle 约定：initialize / shutdown / exit（状态机与校验）
- 传输层
  - Stdio 传输：逐行 JSON（ITransport 抽象 + StdioTransport 实现）
- 服务器（AxolotlMCP.Server）
  - Host 集成：IHostedService 托管、DI 注入、Options 绑定（ServerOptions）
  - 消息路由：请求/通知自动分发，异常路径日志
  - 默认处理器：initialize、tools/list、tools/call、shutdown、exit
- 客户端（AxolotlMCP.Client）
  - 请求-响应关联：Id 映射表，默认超时
  - 并发与重试：Semaphore 限流、指数退避重试（ClientOptions）
  - 通知回调事件钩子
- 工具体系
  - 工具注册中心（ToolRegistry）：注册/批量注册/查询
  - 示例工具：echo（tools/list、tools/call）
- 配置系统（Options）
  - ServerOptions / ClientOptions 与 appsettings.json 绑定
  - 示例配置：samples/appsettings.sample.json（支持环境变量覆盖）
- 可观测性（最低可用）
  - 日志：服务器启停、异常路径
  - 指标（McpMetrics）：请求/通知/响应计数、错误计数、请求耗时直方图
- 文档与示例
  - 服务器 Host 与路由：docs/服务器Host集成与消息路由.md
  - 客户端并发与关联：docs/客户端请求并发与关联.md
  - 生命周期：docs/初始化与关闭生命周期.md
  - 配置系统：docs/配置系统.md
  - 可观测性：docs/基础可观测性.md
  - 示例工程 README：examples/AxolotlMCP.Examples/README.md
- 测试
  - 基础单元测试：ToolRegistry、McpClient（内存传输桩）

## 尚待后续阶段（不阻塞本阶段验收）

- 集成测试（Server-Client 回路）
- 契约测试（关键 JSON 结构）
- 基准测试（吞吐/时延/内存）
- 更丰富的配置项与客户端 API
- OpenTelemetry Tracing、指标导出（Prom/OTLP）
- WebSocket/命名管道等更多传输与中间件（鉴权、限流、审计）


