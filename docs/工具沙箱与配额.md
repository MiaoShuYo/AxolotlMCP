# 工具沙箱与资源配额

通过 `ToolSandboxMiddleware` 为 `tools/call` 提供最小可用的并发配额与超时控制。

## 能力
- 按工具名的最大并发：`DefaultMaxConcurrentPerTool`。
- 执行超时：`DefaultTimeoutSeconds`，或由请求 `params.sandbox.timeoutSeconds` 覆盖。
- 支持按请求临时指定 `params.sandbox.maxConcurrent`（开发/测试用途）。

## 配置
```
{
  "Mcp": {
    "ToolSandbox": {
      "DefaultTimeoutSeconds": 10,
      "DefaultMaxConcurrentPerTool": 8
    }
  }
}
```

## 请求示例
```
{
  "id": "1",
  "method": "tools/call",
  "params": {
    "name": "heavyTool",
    "arguments": {"n": 100},
    "sandbox": { "timeoutSeconds": 5, "maxConcurrent": 2 }
  }
}
```

## 约束与后续
- 该实现为轻量策略，不提供跨进程隔离。
- 后续可扩展：独立进程执行、cgroup/JobObject 资源限制、内存峰值度量。
