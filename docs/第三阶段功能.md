# 第三阶段已完成功能（低优先级）

本阶段聚焦补齐低优先级能力与工程化增强，均已完成并合入主线。

## 1. 命名管道传输（Windows）[#19]
- 实现 `NamedPipeTransport`，按行 JSON 文本收发。
- 文档：`docs/命名管道传输.md`
- 示例配置：见 `samples/appsettings.sample.json`

## 2. 安全扩展（鉴权/DoS 防护）[#20]
- 新增 `SecurityOptions`（`Mcp:Security`）。
- 中间件：`ApiKeyAuthMiddleware`（API Key 鉴权）、`TimeoutMiddleware`（单请求超时）。
- 文档：`docs/中间件.md`
- 示例配置：`samples/appsettings.sample.json`

## 3. DTO → JsonSchema 自动生成（反射版）[#21]
- 新增 `JsonSchemaGenerator`：支持基础类型、枚举、数组、对象属性、`[Required]` 必填。
- 单测：`JsonSchemaGeneratorTests`
- 文档：`docs/DTO到JsonSchema.md`

## 4. 工具沙箱与资源配额（最小实现）[#22]
- 新增 `ToolSandboxOptions`（`Mcp:ToolSandbox`）。
- 中间件：`ToolSandboxMiddleware`（仅对 `tools/call` 生效，按工具名并发与超时）。
- 文档：`docs/工具沙箱与配额.md`、补充 `docs/中间件.md`
- 示例配置：`samples/appsettings.sample.json`

## 关联与影响
- 中间件体系进一步完善：计时、限流、鉴权、超时、工具沙箱。
- 传输层更丰富：Stdio / WebSocket / NamedPipe。
- 文档与样例保持同步更新，降低集成与运维成本。

## 后续建议
- 工具沙箱的进程级隔离与系统资源限制（JobObject/cgroup）。
- JsonSchema Source Generator 版本，增强性能与注解能力。
- 全链路契约测试与集成测试覆盖。
